<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      table{
        margin-left: 30px;
        margin-right: 30px;
      }
      h2{
        margin: 15px 0px 15px 30px;
      }
      .row{
        margin-left: 30px;
      }
      #clock{
        position: fixed;
        right: 50px;
        bottom: 30px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">KREAM</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Fashion</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Event
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">OZ coding</a></li>
                <li><a class="dropdown-item" href="#">Awesome</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">An insane plan</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav justify-content-end">
            <li class="nav-item">
              <a class="nav-link disabled" href="#">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="join.html">Join</a>
            </li>
          </ul>
          <form class="d-flex" role="search">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
          </form>
        </div>
      </div>
    </nav>
    <h2>신규 등록 상품</h2>
    <form class="row g-3">
      <select class="form-select" aria-label="Default select example" id="inlineFormSelectPref" style="width: auto; height: 38px;">
        <option selected="카테고리">카테고리</option>
        <option value="상의">상의</option>
        <option value="하의">하의</option>
        <option value="신발">신발</option>
        <option value="패션잡화">패션잡화</option>
      </select>
      <select class="form-select" aria-label="Default select example" style="width: auto; height: 38px; margin-left: 7px;">
        <option selected="성별">성별</option>
        <option value="남성">남성</option>
        <option value="여성">여성</option>
      </select>
      <div class="col-auto">
        <label for="search" class="visually-hidden">Product search bar</label>
        <input type="text" class="form-control" id="search" placeholder="제품명을 입력해주세요">
      </div>
      <div class="col-auto" id="searchBtn">
        <button type="button" class="btn btn-primary mb-3">조회</button>
      </div>
    </form>
    <table class="table" id="data-table">
      <thead>
        <tr>
          <th scope="col">카테고리</th>
          <th scope="col">브랜드</th>
          <th scope="col">상품명</th>
          <th scope="col">가격</th>
        </tr>
      </thead>
      <tbody id="data-table">
      </tbody>
    </table>
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center">
        <li class="page-item disabled">
          <a class="page-link">Previous</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
          <a class="page-link" href="#">Next</a>
        </li>
      </ul>
    </nav>
    <p id="clock">clock</p>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      // 시간 설정 및 텍스트 치환
      var Target = document.getElementById("clock");
      function clock() {
        var time = new Date();

        var month = time.getMonth();
        var date = time.getDate();
        var day = time.getDay();
        var week = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];

        var hours = time.getHours();
        var minutes = time.getMinutes();
        var seconds = time.getSeconds();

        Target.innerText = 
        `${month + 1}. ${date}. ${week[day]}  ` +
        `  ${hours < 10 ? `0${hours}` : hours}:${minutes < 10 ? `0${minutes}` : minutes}:${seconds < 10 ? `0${seconds}` : seconds}`;                
      }
      clock();
      setInterval(clock, 1000); // 1초마다 실행

      // 크롤링한 데이터를 아래와 같은 형태의 객체 배열로 가정합니다.
      // 추후 데이터베이스에 있는 데이터를 쿼리문으로 불러 올 수 있게 쿼리를 작성해 볼 수 있음
      const data = [
          { category: "상의", brand: 'Supreme', product: 'Supreme Box logo hooded-T', price: '390,000' },
          { category: "하의", brand: 'DIESEL', product: 'Diesel Track Pants', price: '188,000' },
          { category: "신발", brand: 'Nike', product: 'AirForce 1', price: '137,000' },
          { category: "패션잡화", brand: 'Music&Goods', product: '빵빵이 키링', price: '29,000' },
      ];
      
      const dataTable = document.getElementById('data-table');
      
      // 초기화
      data.forEach((item) => {
          const row = dataTable.insertRow();
          row.insertCell(0).innerHTML = item.category;
          row.insertCell(1).innerHTML = item.brand;
          row.insertCell(2).innerHTML = item.product;
          row.insertCell(3).innerHTML = item.price;
      });

      //카테고리 정렬 
      let category=document.querySelector("#inlineFormSelectPref")
      category.addEventListener('change', function() {
        const selectedValue = category.value;
        const dataTable = document.getElementById('data-table');
        //모두 제거후
        let count=dataTable.rows.length
        while(0<count){
          dataTable.deleteRow(count-1)
          count-=1
        }
          
        // 다시생성
        data.forEach((item) => {
          if(item.category==selectedValue || selectedValue=="카테고리"){
            console.log("dd")
            const row = dataTable.insertRow();
            row.insertCell(0).innerHTML = item.category;
            row.insertCell(1).innerHTML = item.brand;
            row.insertCell(2).innerHTML = item.product;
            row.insertCell(3).innerHTML = item.price;
          }
        });
      });

      //검색창 조회
      let search = document.querySelector("#searchBtn")
      let searchData = document.querySelector("#search")
      search.addEventListener('click', function() {
        const selectedValue = category.value;
        const dataTable = document.getElementById('data-table');
        //모두 제거후
        let count=dataTable.rows.length
        while(0<count){
            dataTable.deleteRow(count-1)
            count-=1
        }

        //다시 생성
        data.forEach((item) => {
          if((item.category==selectedValue || selectedValue=="카테고리") && item.product.includes(searchData.value)){
            console.log("dd")
            const row = dataTable.insertRow();
            row.insertCell(0).innerHTML = item.category;
            row.insertCell(1).innerHTML = item.brand;
            row.insertCell(2).innerHTML = item.product;
            row.insertCell(3).innerHTML = item.price;
          }
        });
      })

    </script>
    <!-- 아래는 dark mode 용 bootstrap에서 제공한 script -->
    <script src="darkMode.js"></script>
  </body>
</html>